(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{15:function(t,e,n){"use strict";n.d(e,"a",(function(){return j})),n.d(e,"b",(function(){return l}));var r=n(23),c=n.n(r),a=n(32),u=n(19),s=n.n(u),o=n(5);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){s.a.defaults.headers.common.Authorization=""},j={registerUser:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(o.a.registerUserRequest()),e.prev=1,e.next=4,s.a.post("/users/signup",t);case 4:r=e.sent,console.log(r),i(r.data.token),n(o.a.registerUserSuccess(r.data)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),alert("User credentials are invalid"),n(o.a.registerUserError(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},loginUser:function(t){return function(){var e=Object(a.a)(c.a.mark((function e(n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(o.a.loginRequest()),e.prev=1,e.next=4,s.a.post("/users/login",t);case 4:r=e.sent,i(r.data.token),n(o.a.loginSuccess(r.data)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),alert("User credentials are invalid"),n(o.a.loginError(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logoutUser:function(){return function(t){return t(o.a.logoutRequest()),s.a.post("/users/logout").then((function(){b(),t(o.a.logoutSuccess())})).catch((function(e){return t(o.a.logoutError(e.message))}))}},getCurrentUser:function(){return function(t,e){var n=e().auth.token;if(n)return i(n),t(o.a.getCurrentUserRequest()),s.a.get("/users/current").then((function(e){var n=e.data;return t(o.a.getCurrentUserSuccess(n))})).catch((function(e){return t(o.a.getCurrentUserError(e.message))}))}}},l={getIsAuthorized:function(t){return Boolean(t.auth.token)},getUserName:function(t){return t.auth.user.name}}},16:function(t,e,n){t.exports={link:"linkComStyles_link__3w1LC",activeLink:"linkComStyles_activeLink__1fWsy"}},29:function(t,e,n){t.exports={container:"UserMenu_container__GgYhE",greeting:"UserMenu_greeting__uNhbv",button:"UserMenu_button__3mTE-"}},37:function(t,e,n){"use strict";var r=n(21),c=(n(0),n(1));e.a=function(t){var e=t.title,n=t.type,a=void 0===n?"button":n,u=t.cbOnClick,s=t.cbArgs,o=t.className;return u?Object(c.jsx)("button",{type:a,className:o,onClick:s?function(){return u.apply(void 0,Object(r.a)(s))}:u,children:e}):Object(c.jsx)("button",{type:a,className:o,children:e})}},40:function(t,e,n){"use strict";var r=n(37);n.d(e,"a",(function(){return r.a}))},49:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));n(0);var r=n(56),c=n.n(r),a=n(1),u=function(){return Object(a.jsxs)("div",{className:c.a.ldsSpinner,children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})}},5:function(t,e,n){"use strict";var r=n(2),c=Object(r.b)("auth/registerUserRequest"),a=Object(r.b)("auth/registerUserSuccess"),u=Object(r.b)("auth/registerUserError"),s=Object(r.b)("auth/loginRequest"),o=Object(r.b)("auth/loginSuccess"),i=Object(r.b)("auth/loginError"),b=Object(r.b)("auth/logoutRequest"),j=Object(r.b)("auth/logoutSuccess"),l=Object(r.b)("auth/logoutError"),d=Object(r.b)("auth/getCurrentUserRequest"),O=Object(r.b)("auth/getCurrentUserSuccess"),f=Object(r.b)("auth/getCurrentUserError");e.a={registerUserRequest:c,registerUserSuccess:a,registerUserError:u,loginRequest:s,loginSuccess:o,loginError:i,logoutRequest:b,logoutSuccess:j,logoutError:l,getCurrentUserRequest:d,getCurrentUserSuccess:O,getCurrentUserError:f}},52:function(t,e,n){t.exports={container:"Container_container__3RIox"}},53:function(t,e,n){t.exports={header:"AppBar_header__1Yk8v"}},54:function(t,e,n){t.exports={linkHome:"Navigation_linkHome__EX8tY"}},55:function(t,e,n){t.exports={linkRegister:"AuthNav_linkRegister__3ESGH"}},56:function(t,e,n){t.exports={ldsSpinner:"Loader_ldsSpinner__2uzs8"}},89:function(t,e,n){},9:function(t,e,n){"use strict";n.d(e,"l",(function(){return c})),n.d(e,"m",(function(){return a})),n.d(e,"k",(function(){return u})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i})),n.d(e,"i",(function(){return b})),n.d(e,"j",(function(){return j})),n.d(e,"h",(function(){return l})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return O})),n.d(e,"d",(function(){return f})),n.d(e,"g",(function(){return h}));var r=n(2),c=Object(r.b)("contacts/fetchContactsRequest"),a=Object(r.b)("contacts/fetchContactsSuccess"),u=Object(r.b)("contacts/fetchContactsError"),s=Object(r.b)("contacts/addContactRequest"),o=Object(r.b)("contacts/addContactSuccess"),i=Object(r.b)("contacts/addContactError"),b=Object(r.b)("contacts/deleteContactRequest"),j=Object(r.b)("contacts/deleteContactSuccess"),l=Object(r.b)("contacts/deleteContactError"),d=Object(r.b)("contacts/changeContactRequest"),O=Object(r.b)("contacts/changeContactSuccess"),f=Object(r.b)("contacts/changeContactError"),h=Object(r.b)("contacts/changeFilter")},90:function(t,e,n){"use strict";n.r(e);var r,c,a,u,s,o=n(0),i=n.n(o),b=n(24),j=n.n(b),l=n(17),d=n(14),O=n(50),f=n(21),h=n(2),g=n(18),p=n(51),v=n.n(p),x=n(3),m=n(7),k=n(9),C=k.l,U=k.m,y=k.k,S=k.b,_=k.c,E=k.a,N=k.i,R=k.j,z=k.h,q=k.e,A=k.f,L=k.d,w=k.g,I=Object(h.c)([],(r={},Object(x.a)(r,U,(function(t,e){return e.payload})),Object(x.a)(r,_,(function(t,e){var n=e.payload;return t.find((function(t){return t.number===n.number}))?t:[].concat(Object(f.a)(t),[n])})),Object(x.a)(r,R,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(x.a)(r,A,(function(t,e){var n=e.payload;return t.map((function(t){return t.id===n.id?n:t}))})),r)),H=Object(h.c)("",Object(x.a)({},w,(function(t,e){return e.payload}))),M=Object(h.c)(!1,(c={},Object(x.a)(c,C,(function(){return!0})),Object(x.a)(c,U,(function(){return!1})),Object(x.a)(c,y,(function(){return!1})),Object(x.a)(c,S,(function(){return!0})),Object(x.a)(c,_,(function(){return!1})),Object(x.a)(c,E,(function(){return!1})),Object(x.a)(c,N,(function(){return!0})),Object(x.a)(c,R,(function(){return!1})),Object(x.a)(c,z,(function(){return!1})),Object(x.a)(c,q,(function(){return!0})),Object(x.a)(c,A,(function(){return!1})),Object(x.a)(c,L,(function(){return!1})),c)),B=Object(m.b)({items:I,filter:H,loading:M}),Y=n(5),G={name:null,email:null},J=Object(h.c)(G,(a={},Object(x.a)(a,Y.a.registerUserSuccess,(function(t,e){return e.payload.user})),Object(x.a)(a,Y.a.loginSuccess,(function(t,e){return e.payload.user})),Object(x.a)(a,Y.a.logoutSuccess,(function(){return G})),Object(x.a)(a,Y.a.getCurrentUserSuccess,(function(t,e){return e.payload})),a)),T=Object(h.c)(null,(u={},Object(x.a)(u,Y.a.registerUserSuccess,(function(t,e){return e.payload.token})),Object(x.a)(u,Y.a.loginSuccess,(function(t,e){return e.payload.token})),Object(x.a)(u,Y.a.logoutSuccess,(function(){return null})),u)),W=Object(h.c)(null,(s={},Object(x.a)(s,Y.a.registerUserError,(function(t,e){return e.payload})),Object(x.a)(s,Y.a.loginError,(function(t,e){return e.payload})),Object(x.a)(s,Y.a.logoutError,(function(t,e){return e.payload})),Object(x.a)(s,Y.a.getCurrentUserError,(function(t,e){return e.payload})),s)),D=Object(m.b)({user:J,token:T,error:W}),F=Object(f.a)(Object(h.d)({serializableCheck:{ignoredActions:[g.a,g.f,g.b,g.c,g.d,g.e]}})),X={key:"auth",storage:v.a,whitelist:["token"]},K=Object(h.a)({reducer:{auth:Object(g.g)(X,D),contacts:B},middleware:F,devTools:!1}),P={store:K,persistor:Object(g.h)(K)},Q=n(28),V=n(35),Z=n(36),$=n(39),tt=n(38),et=n(6),nt="/",rt="/contacts",ct="/register",at="/login",ut=n(15),st=n(52),ot=n.n(st),it=n(1),bt=function(t){var e=t.children;return Object(it.jsx)("div",{className:ot.a.container,children:e})},jt=n(53),lt=n.n(jt),dt=n(16),Ot=n.n(dt),ft=n(54),ht=n.n(ft),gt=n(27),pt=n.n(gt),vt=Object(d.b)((function(t){return{isAuthorized:ut.b.getIsAuthorized(t)}}))((function(t){var e=t.isAuthorized;return Object(it.jsxs)("nav",{children:[Object(it.jsx)(l.b,{to:nt,exact:!0,className:pt()(Ot.a.link,ht.a.linkHome),activeClassName:Ot.a.activeLink,children:"Home"}),e&&Object(it.jsx)(l.b,{to:rt,exact:!0,className:Ot.a.link,activeClassName:Ot.a.activeLink,children:"Contacts"})]})})),xt=n(40),mt=n(29),kt=n.n(mt),Ct=Object(d.b)((function(t){return{userName:ut.b.getUserName(t)}}),(function(t){return{handleLogout:function(){return t(ut.a.logoutUser())}}}))((function(t){var e=t.userName,n=t.handleLogout;return Object(it.jsxs)("div",{className:kt.a.container,children:[Object(it.jsxs)("p",{className:kt.a.greeting,children:["Welcome, ",e]}),Object(it.jsx)(xt.a,{title:"Logout",cbOnClick:n,className:kt.a.button})]})})),Ut=n(55),yt=n.n(Ut),St=function(){return Object(it.jsxs)("div",{children:[Object(it.jsx)(l.b,{to:ct,className:pt()(yt.a.linkRegister,Ot.a.link),activeClassName:Ot.a.activeLink,children:"Register"}),Object(it.jsx)(l.b,{to:at,className:Ot.a.link,activeClassName:Ot.a.activeLink,children:"Login"})]})},_t=Object(d.b)((function(t){return{isAuthorized:ut.b.getIsAuthorized(t)}}),null)((function(t){var e=t.isAuthorized;return Object(it.jsxs)("header",{className:lt.a.header,children:[Object(it.jsx)(vt,{}),e?Object(it.jsx)(Ct,{}):Object(it.jsx)(St,{})]})})),Et=n(49),Nt=Object(o.lazy)((function(){return n.e(4).then(n.bind(null,97))})),Rt=Object(o.lazy)((function(){return n.e(6).then(n.bind(null,98))})),zt=Object(o.lazy)((function(){return n.e(5).then(n.bind(null,99))})),qt=Object(o.lazy)((function(){return n.e(3).then(n.bind(null,96))})),At=function(t){Object($.a)(n,t);var e=Object(tt.a)(n);function n(){return Object(V.a)(this,n),e.apply(this,arguments)}return Object(Z.a)(n,[{key:"componentDidMount",value:function(){this.props.getCurrentUser()}},{key:"render",value:function(){var t=this.props.isAuthorized;return Object(it.jsxs)(bt,{children:[Object(it.jsx)(_t,{}),Object(it.jsx)(o.Suspense,{fallback:Object(it.jsx)(Et.a,{}),children:Object(it.jsxs)(et.d,{children:[Object(it.jsx)(et.b,{exact:!0,path:nt,component:Nt}),Object(it.jsx)(et.b,{path:ct,render:function(e){return t?Object(it.jsx)(et.a,{to:rt}):Object(it.jsx)(Rt,Object(Q.a)({},e))}}),Object(it.jsx)(et.b,{path:at,render:function(e){return t?Object(it.jsx)(et.a,{to:rt}):Object(it.jsx)(zt,Object(Q.a)({},e))}}),Object(it.jsx)(et.b,{path:rt,render:function(e){return t?Object(it.jsx)(qt,Object(Q.a)({},e)):Object(it.jsx)(et.a,{to:at})}})]})})]})}}]),n}(o.Component),Lt={getCurrentUser:ut.a.getCurrentUser},wt=Object(d.b)((function(t){return{isAuthorized:ut.b.getIsAuthorized(t)}}),Lt)(At);n(88),n(89);j.a.render(Object(it.jsx)(i.a.StrictMode,{children:Object(it.jsx)(d.a,{store:P.store,children:Object(it.jsx)(O.a,{loading:null,persistor:P.persistor,children:Object(it.jsx)(l.a,{children:Object(it.jsx)(wt,{})})})})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.ca1b10b3.chunk.js.map